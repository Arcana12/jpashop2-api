# 실전! 스프링 부트와 JPA 활용2 - API 개발과 성능 최적화
김영한님의 강의를 보며 공부한 내용을 정리하는 파일입니다

<br>
<br>

## API 개발 기본
### 회원 등록 API (Initial commit)
v1->v2<br>
API를 만들때 Entity를 파리미터로 받으면 안된다.<br>
-> Entity가 변경되면 API스펙자체가 변경되기 때문<br>
API요청 스펙에 맞춰서 별도의 DTO를 만들어 파라미터로 받는게 좋다.<br>
<br>
### 회원 수정 API
데이터를 수정할때 변경감지를 이용<br>

### 회원 조회 API
#### v1 문제점
- Entity에 프레젠테이션 계층을 위한 로직이 추가된다.
- 기본적으로 Entity의 모든 값이 노출된다.
- 응답 스펙을 맞추기 위해 로직이 추가된다. (@JsonIgnore, 별도의 뷰 로직 등등)
- 실무에서는 같은 Entity에 대해 API가 용도에 따라 다양하게 만들어지는데, 한 Entity에 각각의 API를 위한 프레젠테이션 응답 로직을 담기는 어렵다.
- Entity가 변경되면 API 스펙이 변한다.
- 추가로 컬렉션을 직접 반환하면 항후 API 스펙을 변경하기 어렵다.(별도의 Result 클래스 생성으로 해결)
<br>

#### 결론
API 응답 스펙에 맞추어 별도의 DTO를 반환한다.<br>
<br>

:memo: Entity를 외부에 노출하지 마세요!<br>
실무에서는 member Entity의 데이터가 필요한 API가 계속 증가하게 된다. 어떤 API는 name 필드가 필요하지만, 어떤 API는 name 필드가 필요없을 수 있다.<br>
결론적으로 Entity 대신에 API 스펙에 맞는 별도의 DTO를 노출해야 한다.<br>
